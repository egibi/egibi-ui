<div class="auth-page">
  <div class="auth-card">
    <!-- Logo / Brand -->
    <div class="auth-header">
      <div class="auth-logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="418 370 300 260" width="36" height="36"
             role="img" aria-label="Egibi logo">
          <g fill="currentColor" fill-rule="evenodd">
            <path d="M481 459L493 459L494 460L503 460L504 459L507 459L508 458L509 458L510 457L511 457L512 456L513 456L514 455L515 455L516 454L517 454L519 452L520 452L523 449L524 449L525 448L524 447L521 447L520 446L516 446L515 445L512 445L511 444L508 444L507 443L504 443L503 442L495 442L492 445L492 446L490 448L490 449L481 458Z"/>
            <path d="M679 406L522 384L474 437L418 475L442 524L478 526L463 540L448 537L454 559L499 560L522 616L545 608L541 552L562 602L604 581L555 505L517 491L510 522L447 512L437 490L451 474L441 471L477 447L497 422L596 410L587 433L557 447L573 466L559 498L620 568L665 535L599 472L673 514L695 481L623 439L688 461ZM598 471L599 470L600 471L599 472ZM596 470L597 469L598 469L599 470L598 471L597 471Z"/>
          </g>
        </svg>
      </div>
      <h1>Welcome back</h1>
      <p>Sign in to your Egibi account</p>
    </div>

    <!-- Error Message -->
    @if (error()) {
      <div class="auth-alert auth-alert-error">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <line x1="12" x2="12" y1="8" y2="12"/>
          <line x1="12" x2="12.01" y1="16" y2="16"/>
        </svg>
        <span>{{ error() }}</span>
      </div>
    }

    <!-- Login Form -->
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="auth-field">
        <label for="email">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          placeholder="you@example.com"
          autocomplete="email"
          [class.invalid]="form.get('email')?.touched && form.get('email')?.invalid"
        />
        @if (form.get('email')?.touched && form.get('email')?.hasError('email')) {
          <span class="field-error">Enter a valid email address</span>
        }
      </div>

      <div class="auth-field">
        <div class="field-label-row">
          <label for="password">Password</label>
          <a routerLink="/auth/forgot-password" class="field-link">Forgot password?</a>
        </div>
        <div class="input-with-toggle">
          <input
            id="password"
            [type]="showPassword() ? 'text' : 'password'"
            formControlName="password"
            placeholder="••••••••"
            autocomplete="current-password"
            [class.invalid]="form.get('password')?.touched && form.get('password')?.invalid"
          />
          <button type="button" class="toggle-password" (click)="togglePassword()" tabindex="-1">
            @if (showPassword()) {
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94"/>
                <path d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19"/>
                <line x1="1" x2="23" y1="1" y2="23"/>
              </svg>
            } @else {
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            }
          </button>
        </div>
      </div>

      <button
        type="submit"
        class="auth-btn-primary"
        [disabled]="loading()"
      >
        @if (loading()) {
          <span class="spinner"></span>
          Signing in...
        } @else {
          Sign in
        }
      </button>
    </form>

    <!-- Footer -->
    <div class="auth-footer">
      <span>Don't have an account?</span>
      <a routerLink="/auth/signup">Create one</a>
    </div>
  </div>
</div>
