// ============================================
// SIDEBAR STYLES
// ============================================

// Variables
$sidebar-width: 240px;
$sidebar-collapsed-width: 72px;
$sidebar-transition: 0.2s ease;

.app-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: $sidebar-width;
  background-color: hsl(var(--egibi-card));
  border-right: 1px solid hsl(var(--egibi-border));
  display: flex;
  flex-direction: column;
  z-index: 1000;
  transition: width $sidebar-transition, transform 0.3s ease;

  // Collapsed state
  &.collapsed {
    width: $sidebar-collapsed-width;
  }

  @media (max-width: 991.98px) {
    transform: translateX(-100%);
    width: $sidebar-width !important; // Always full width on mobile
    
    &.show {
      transform: translateX(0);
    }
  }
}

// ============================================
// HEADER
// ============================================

.sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 64px;
  padding: 0 1rem;
  border-bottom: 1px solid hsl(var(--egibi-border));
  
  .collapsed & {
    justify-content: center;
    padding: 0 0.75rem;
  }
}

.sidebar-brand {
  display: flex;
  align-items: center;
  text-decoration: none;
  overflow: hidden;
  
  &:hover {
    text-decoration: none;
  }
}

// SVG Logo styling
.brand-logo {
  height: 40px;
  width: auto;
  color: hsl(var(--egibi-foreground));
  transition: all $sidebar-transition;
  
  // Collapsed state - show just the lion icon
  &.collapsed {
    height: 36px;
    width: 46px;
  }
}

// ============================================
// COLLAPSE TOGGLE
// ============================================

.collapse-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  padding: 0;
  background: transparent;
  border: 1px solid hsl(var(--egibi-border));
  border-radius: var(--egibi-radius);
  color: hsl(var(--egibi-muted-foreground));
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
  
  &:hover {
    background-color: hsl(var(--egibi-accent));
    color: hsl(var(--egibi-foreground));
    border-color: hsl(var(--egibi-border));
  }
  
  svg {
    transition: transform $sidebar-transition;
    
    &.rotated {
      transform: rotate(180deg);
    }
  }
  
  .collapsed & {
    position: absolute;
    right: -14px;
    top: 50%;
    transform: translateY(-50%);
    background-color: hsl(var(--egibi-card));
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    z-index: 10;
  }
}

// ============================================
// NAVIGATION
// ============================================

.sidebar-nav {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 1rem 0.75rem;
  
  .collapsed & {
    padding: 1rem 0.5rem;
  }
}

.sidebar-section {
  margin-bottom: 1.25rem;
  
  .collapsed & {
    margin-bottom: 0.5rem;
  }
}

.sidebar-section-title {
  padding: 0 0.75rem;
  margin-bottom: 0.5rem;
  font-size: 0.6875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: hsl(var(--egibi-muted-foreground));
  white-space: nowrap;
  transition: opacity $sidebar-transition;
  
  &.hidden {
    opacity: 0;
    height: 0;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }
}

.section-divider {
  height: 1px;
  background-color: hsl(var(--egibi-border));
  margin: 0.5rem 0.75rem;
}

.sidebar-link {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.625rem 0.75rem;
  margin-bottom: 0.125rem;
  border-radius: var(--egibi-radius);
  font-size: 0.875rem;
  font-weight: 500;
  color: hsl(var(--egibi-muted-foreground));
  text-decoration: none;
  transition: all 0.15s ease;
  position: relative;
  
  &:hover {
    background-color: hsl(var(--egibi-accent));
    color: hsl(var(--egibi-accent-foreground));
    text-decoration: none;
  }
  
  &.active {
    background-color: hsl(var(--egibi-accent));
    color: hsl(var(--egibi-foreground));
  }
  
  .collapsed & {
    justify-content: center;
    padding: 0.625rem;
  }
}

.sidebar-icon {
  width: 1.25rem;
  height: 1.25rem;
  flex-shrink: 0;
  
  svg {
    width: 100%;
    height: 100%;
  }
}

.sidebar-link-text {
  white-space: nowrap;
  transition: opacity $sidebar-transition, width $sidebar-transition;
  
  &.hidden {
    opacity: 0;
    width: 0;
    overflow: hidden;
    position: absolute;
  }
}

// ============================================
// FOOTER
// ============================================

.sidebar-footer {
  padding: 1rem;
  border-top: 1px solid hsl(var(--egibi-border));
  
  .collapsed & {
    padding: 0.75rem 0.5rem;
  }
}

.footer-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  
  &.collapsed {
    justify-content: center;
  }
}

.avatar {
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 9999px;
  font-weight: 600;
  background-color: hsla(var(--egibi-primary), 0.1);
  color: hsl(var(--egibi-primary));
  
  &.avatar-sm {
    width: 2rem;
    height: 2rem;
    font-size: 0.75rem;
  }
}

// ============================================
// ENVIRONMENT INDICATOR
// ============================================

.env-indicator {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.375rem 0.75rem;
  margin-top: 0.5rem;
  border-radius: var(--egibi-radius);
  background-color: hsla(174, 72%, 46%, 0.08);
  border: 1px solid hsla(174, 72%, 46%, 0.15);
  
  &.collapsed {
    justify-content: center;
    padding: 0.375rem;
    margin-top: 0.375rem;
  }
  
  // Production style - amber/orange
  &.env-prod {
    background-color: hsla(38, 92%, 50%, 0.08);
    border-color: hsla(38, 92%, 50%, 0.15);
    
    .env-tag {
      background-color: hsla(38, 92%, 50%, 0.15);
      color: hsl(38, 92%, 50%);
    }
    
    .env-dot {
      background-color: hsl(38, 92%, 50%);
    }
  }
}

.env-tag {
  font-size: 0.625rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  padding: 0.125rem 0.375rem;
  border-radius: 4px;
  background-color: hsla(174, 72%, 46%, 0.15);
  color: hsl(174, 72%, 46%);
  line-height: 1.4;
}

.env-name {
  font-size: 0.6875rem;
  color: hsl(var(--egibi-muted-foreground));
  font-weight: 500;
}

.env-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: hsl(174, 72%, 46%);
  animation: env-pulse 2s ease-in-out infinite;
}

@keyframes env-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

// ============================================
// OVERLAY
// ============================================

.sidebar-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 999;
  
  @media (max-width: 991.98px) {
    &.show {
      display: block;
    }
  }
}

// ============================================
// DARK MODE ENHANCEMENTS
// ============================================

[data-theme="dark"] {
  .app-sidebar {
    background-color: hsl(230, 22%, 7%);
    border-right-color: hsl(230, 15%, 12%);
  }
  
  .sidebar-header {
    border-bottom-color: hsl(230, 15%, 12%);
  }
  
  .sidebar-footer {
    border-top-color: hsl(230, 15%, 12%);
  }
  
  .collapse-toggle {
    border-color: hsl(230, 15%, 18%);
    
    &:hover {
      background-color: hsl(230, 18%, 14%);
      border-color: hsl(230, 15%, 22%);
    }
    
    .collapsed & {
      background-color: hsl(230, 22%, 10%);
      border-color: hsl(230, 15%, 18%);
    }
  }
  
  .section-divider {
    background-color: hsl(230, 15%, 15%);
  }
  
  .sidebar-link {
    &:hover {
      background-color: hsl(230, 18%, 12%);
    }
    
    &.active {
      background-color: hsla(174, 72%, 46%, 0.15);
      color: hsl(174, 72%, 56%);
      
      &::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 3px;
        height: 60%;
        background: linear-gradient(180deg, hsl(174, 72%, 46%), hsl(174, 72%, 36%));
        border-radius: 0 2px 2px 0;
      }
    }
  }
  
  .brand-icon {
    background: linear-gradient(135deg, hsl(174, 72%, 46%), hsl(174, 72%, 36%));
  }
}
