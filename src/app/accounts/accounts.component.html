<div class="space-y-6">
  <!-- Page Header -->
  <div class="page-header">
    <div class="page-header-content">
      <h1 class="page-title">Accounts</h1>
      <p class="page-subtitle">Manage your connected platform accounts</p>
    </div>
    <div class="page-header-actions">
      <button class="btn btn-primary" (click)="addNewAccount()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14"/>
          <path d="M12 5v14"/>
        </svg>
        Add Account
      </button>
    </div>
  </div>

  <!-- Empty State -->
  @if (accounts.length === 0) {
    <div class="card">
      <div class="card-body">
        <div class="empty-state">
          <div class="empty-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
              <rect width="20" height="14" x="2" y="5" rx="2"/>
              <path d="M2 10h20"/>
            </svg>
          </div>
          <h5>No accounts yet</h5>
          <p class="text-muted mb-3">Connect your first platform account to get started.</p>
          <button class="btn btn-primary btn-sm" (click)="addNewAccount()">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
            Add Account
          </button>
        </div>
      </div>
    </div>
  }

  <!-- Tabbed Accounts List -->
  @if (accounts.length > 0) {
    <div class="card">
      <div class="card-body p-0">
        <ul ngbNav #nav="ngbNav" [(activeId)]="activeTab" (activeIdChange)="onTabChange($event)" class="nav-tabs px-4 pt-3">
          @for (tab of tabs; track tab.id) {
            <li [ngbNavItem]="tab.id">
              <button ngbNavLink>
                {{ tab.label }}
                <span class="tab-count">{{ tab.count }}</span>
              </button>
              <ng-template ngbNavContent>
                <div class="tab-content-wrapper">
                  @if (filteredAccounts.length === 0) {
                    <div class="tab-empty-state">
                      <p class="text-muted mb-2">No {{ tab.label === 'All' ? '' : tab.label.toLowerCase() + ' ' }}accounts yet.</p>
                      <button class="btn btn-outline-primary btn-sm" (click)="addNewAccount()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
                        Add Account
                      </button>
                    </div>
                  } @else {
                    <egibi-table
                      [columns]="tableColumns"
                      [data]="filteredAccounts"
                      [defaultSort]="defaultSort"
                      (rowClicked)="rowClicked($event)">
                    </egibi-table>
                  }
                </div>
              </ng-template>
            </li>
          }
        </ul>

        <div [ngbNavOutlet]="nav"></div>
      </div>
    </div>
  }

  <!-- Return to Top Button -->
  @if (showScrollTop) {
    <button class="scroll-top-btn" (click)="scrollToTop()" aria-label="Return to top">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M18 15l-6-6-6 6"/>
      </svg>
    </button>
  }
</div>
