<div class="space-y-6">
  <!-- Page Header -->
  <div class="page-header">
    <div class="page-header-content">
      <div class="d-flex align-items-center gap-3">
        <button class="btn btn-outline-secondary btn-sm" (click)="goBack()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 12H5" />
            <path d="M12 19l-7-7 7-7" />
          </svg>
        </button>
        <div>
          <h1 class="page-title">{{ accountDetail?.name || 'Account Details' }}</h1>
          <p class="page-subtitle">
            @if (accountDetail?.connectionName) {
              {{ accountDetail?.connectionName }}
              @if (accountDetail?.accountTypeName) {
                Â· {{ accountDetail?.accountTypeName }}
              }
            } @else {
              Manage account settings, credentials, and fees
            }
          </p>
        </div>
      </div>
    </div>
    <div class="page-header-actions">
      @if (accountDetail) {
        <span class="badge" [class.badge-success]="accountDetail.isActive" [class.badge-secondary]="!accountDetail.isActive">
          {{ accountDetail.isActive ? 'Active' : 'Inactive' }}
        </span>
      }
    </div>
  </div>

  <!-- Loading State -->
  @if (loading) {
    <div class="card">
      <div class="card-body text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3 text-muted">Loading account details...</p>
      </div>
    </div>
  }

  <!-- Error State -->
  @if (error && !loading) {
    <div class="card">
      <div class="card-body text-center py-5">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="text-danger mb-3">
          <circle cx="12" cy="12" r="10" />
          <line x1="12" y1="8" x2="12" y2="12" />
          <line x1="12" y1="16" x2="12.01" y2="16" />
        </svg>
        <p class="text-danger">{{ error }}</p>
        <button class="btn btn-outline-primary btn-sm mt-2" (click)="loadAccountDetail()">Try Again</button>
      </div>
    </div>
  }

  <!-- Account Detail Tabs -->
  @if (accountDetail && !loading) {
    <div class="card">
      <div class="card-body p-0">
        <ul ngbNav #nav="ngbNav" [(activeId)]="activeTab" class="nav-tabs px-4 pt-3">
          <li ngbNavItem="general">
            <button ngbNavLink>General</button>
            <ng-template ngbNavContent>
              <div class="tab-content-wrapper">
                <account-general
                  [account]="accountDetail"
                  [accountTypes]="accountTypes"
                  (saved)="onAccountUpdated()">
                </account-general>
              </div>
            </ng-template>
          </li>

          <li ngbNavItem="api">
            <button ngbNavLink>API</button>
            <ng-template ngbNavContent>
              <div class="tab-content-wrapper">
                <account-api
                  [account]="accountDetail"
                  (saved)="onAccountUpdated()">
                </account-api>
              </div>
            </ng-template>
          </li>

          <li ngbNavItem="fees">
            <button ngbNavLink>Fees</button>
            <ng-template ngbNavContent>
              <div class="tab-content-wrapper">
                <account-fees
                  [account]="accountDetail"
                  (saved)="onAccountUpdated()">
                </account-fees>
              </div>
            </ng-template>
          </li>

          <li ngbNavItem="status">
            <button ngbNavLink>Status</button>
            <ng-template ngbNavContent>
              <div class="tab-content-wrapper">
                <account-status
                  [account]="accountDetail">
                </account-status>
              </div>
            </ng-template>
          </li>
        </ul>

        <div [ngbNavOutlet]="nav"></div>
      </div>
    </div>
  }
</div>